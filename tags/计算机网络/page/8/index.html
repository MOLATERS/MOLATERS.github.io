<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>标签: 计算机网络 - SlaterXu</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SlaterXu"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SlaterXu"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="this is a personal notion keeper"><meta property="og:type" content="blog"><meta property="og:title" content="SlaterXu"><meta property="og:url" content="https://molaters.github.io/"><meta property="og:site_name" content="SlaterXu"><meta property="og:description" content="this is a personal notion keeper"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://molaters.github.io/img/og_image.png"><meta property="article:author" content="Molaters Lee"><meta property="article:tag" content="Develope"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://molaters.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://molaters.github.io"},"headline":"SlaterXu","image":["https://molaters.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Molaters Lee"},"publisher":{"@type":"Organization","name":"SlaterXu","logo":{"@type":"ImageObject","url":"https://molaters.github.io/img/logo.svg"}},"description":"this is a personal notion keeper"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SlaterXu" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">计算机网络</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.045Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-10-15T14:04:09.112Z" title="2023/10/15 22:04:09">2023-10-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">3 分钟读完 (大约414个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-DHCP%E5%8D%8F%E8%AE%AE/">CN-DHCP协议</a></p><div class="content"><head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>
[[计算机网络]]

<h2 id="如何获得IP地址"><a href="#如何获得IP地址" class="headerlink" title="如何获得IP地址"></a>如何获得IP地址</h2><p>Q： 一个主机如何获得IP地址？</p>
<ul>
<li>”硬编码“：静态配置</li>
</ul>
<p>需要配置的信息包括IP地址和子网掩码。</p>
<p><strong>默认网关</strong>： 所谓的默认网关就是当这个IP的数据报在向外传递数据的时候应该向什么地方进行转发。代表的是路由器的接口。</p>
<p>路由器接入子网的这个接口的IP地址就是这个子网中所有主机的默认网关。</p>
<p>域名服务器：默认的域名服务器 <strong>本地域名服务器</strong></p>
<ul>
<li>动态地址的获取 动态主机配置协议：DHCP Dynamic Host Configuration Protocol</li>
</ul>
<p>从服务器动态获取</p>
<ul>
<li>IP地址</li>
<li>子网掩码</li>
<li>默认网关地址</li>
<li>DNS服务器名称和IP地址</li>
</ul>
<p>“即插即用”</p>
<p>允许地址的重用</p>
<p>支持在用地址的续租</p>
<p>支持移动用户加入网络</p>
<h2 id="动态主机配置协议"><a href="#动态主机配置协议" class="headerlink" title="动态主机配置协议"></a>动态主机配置协议</h2><p>新到主机（DHCP客户）需要本网IP地址</p>
<p>”主机广播“：DHCP discover（发现报文）</p>
<p>DHCP服务器利用”DHCP offer“(提供报文)进行相应</p>
<p>主机请求IP地址：”DHCP request“ (请求报文)</p>
<h2 id="DHCP工作过程示例"><a href="#DHCP工作过程示例" class="headerlink" title="DHCP工作过程示例"></a>DHCP工作过程示例</h2><p>DHCP server: 223.1.2.5.67</p>
<img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/image-20231015220123172.png" alt="image-20231015220123172" style="zoom:67%;" />

<h3 id="DHCP协议在应用层实现"><a href="#DHCP协议在应用层实现" class="headerlink" title="DHCP协议在应用层实现"></a>DHCP协议在应用层实现</h3><p>请求报文封装到UDP数据报中</p>
<p>IP广播</p>
<p>链路层广播（以太网广播）</p>
<p>DHCP服务器构造ACK报文</p>
<p>包括分配给客户的IP地址、子网掩码、默认网关、DNS服务器地址</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.044Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-10-12T09:06:17.255Z" title="2023/10/12 17:06:17">2023-10-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">几秒读完 (大约23个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-DELETE/">CN-DELETE</a></p><div class="content"><head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>
[[2023-09-17]]
删除URL字段所指定的文件

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.043Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-10-15T13:44:28.540Z" title="2023/10/15 21:44:28">2023-10-15</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">2 分钟读完 (大约270个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-CIDR%E5%92%8C%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88/">CN-CIDR和路由聚合</a></p><div class="content"><head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>
[[计算机网络]]

<h2 id="CIDR"><a href="#CIDR" class="headerlink" title="CIDR"></a>CIDR</h2><p>无类域间路由（CIDR：Classless InterDomain Routing)</p>
<p>消除传统的A类、B类和C类地址界限</p>
<ul>
<li>NetID + SubID $\to$ Network Prefix(Prefix) 可以任意的长度</li>
</ul>
<p>融合子网地址和子网掩码，方便子网进行划分</p>
<ul>
<li>无类地址格式：a.b.c.d&#x2F;x，其中x为前缀长度</li>
</ul>
<p>例如</p>
<img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/20231015212717.png" alt="image.png" style="zoom:67%;" />
和有类IP地址就有很大的区别了；也就是打破了有类地址的界限划分

<p>子网 201.2.3.64，255.255.255.192 🤜 201.2.3.64&#x2F;26</p>
<h2 id="CIDR和路由聚合"><a href="#CIDR和路由聚合" class="headerlink" title="CIDR和路由聚合"></a>CIDR和路由聚合</h2><p>无类域间路由（CIDR)</p>
<ul>
<li>提高IPv4的地址空间分配效率</li>
</ul>
<p>可以将很多的C网划分在一起再统一的进行转发</p>
<ul>
<li>能够提高路由效率<ul>
<li>将多个子网聚合成一个较大的子网</li>
<li>构造超网</li>
<li><strong>路由聚合</strong>（route aggregation）</li>
</ul>
</li>
</ul>
<img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/image-20231015213443100.png" alt="image-20231015213443100" style="zoom: 67%;" />

<img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/image-20231015213823598.png" alt="image-20231015213823598" style="zoom:67%;" />
## 路由聚合
层级编址使得路由信息通告更加高效

<img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/image-20231015213908264.png" alt="image-20231015213908264" style="zoom:50%;" />

<p>选用更加具体的路由：<strong>最长前缀匹配优先</strong>！</p>
<p>通过前缀长度来加以区分</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.043Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-10-12T09:06:21.453Z" title="2023/10/12 17:06:21">2023-10-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">3 分钟读完 (大约497个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" target="_blank" rel="noopener" href="https://www.notion.so/Cookie-624bd170bbd043cdad48e92ff101f95d">CN-Cookie</a></p><div class="content"><head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>
[[2023-09-17]]

<h2 id="为什么需要Cookie"><a href="#为什么需要Cookie" class="headerlink" title="为什么需要Cookie?"></a>为什么需要Cookie?</h2><p>HTTP协议无状态</p>
<p>很多应用需要服务器掌握客户的状态：</p>
<ul>
<li><strong>网上购物</strong></li>
</ul>
<h2 id="Cookie技术"><a href="#Cookie技术" class="headerlink" title="Cookie技术"></a>Cookie技术</h2><p>某些网站为了辨别身份，进行session跟踪而存储在用户本地终端上的数据（<strong>通常经过加密</strong>）<br>RFC6265</p>
<p><strong>Cookie的组件</strong></p>
<ul>
<li>HTTP响应消息的cookie头部行</li>
<li>HTTP请求消息的cookie头部行</li>
<li>保存在客户端主机上的cookie文件，由浏览器管理</li>
<li>Web服务器端的后台数据库</li>
</ul>
<h2 id="Cookie的原理"><a href="#Cookie的原理" class="headerlink" title="Cookie的原理"></a>Cookie的原理</h2><p>Susan 首次PC上网，首次和Amazon.com取得联系。界定过去访问过eBay站点，当请求报文到达该Amazon Web服务器的时候，这个Web站点将产生一个唯一的识别码，并以此缩影在它的后端数据库中产生一个表项。接下来Amazon Web服务器用一个包含Set-cookie：首部的HTTP响应报文来对Susan的浏览器进行响应，其中Set-cookie:首部含有识别码。</p>
<p>Susan浏览器收到了该HTTP的响应报文的时候，它会看到该Set-cookie:首部。该浏览器在它管理的特定cookie文件中添加一行，该行包含服务器的主机名和在Set-cookie：首部中的识别码。</p>
<p>值得注意的是当前的cookie文件已经有了eBay的表项，因为Susan过去访问过该站点。之后的浏览都会从该cookie文件中获取她对这个网站的识别码，并放到HTTP请求报文中包括识别码的cookie首部行中。</p>
<p>在这种方式下，Amazon服务器可以跟踪Susan在Amazon站点的活动。Amazon使用cookie来提供 <strong>购物车服务</strong> </p>
<p>![[assets 1&#x2F;Pasted image 20230917115446.png]]</p>
<h2 id="Cookie的作用"><a href="#Cookie的作用" class="headerlink" title="Cookie的作用"></a>Cookie的作用</h2><ul>
<li><p>cookie能够用于：****</p>
<ul>
<li>身份认证</li>
<li>购物车</li>
<li>推荐</li>
<li>Web e-mail</li>
<li>……</li>
</ul>
</li>
<li><p>隐私问题</p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.041Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-10-30T02:39:34.037Z" title="2023/10/30 10:39:34">2023-10-30</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">5 分钟读完 (大约813个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" target="_blank" rel="noopener" href="https://www.notion.so/CN-BGP-9eeb4aad532b44f2811a39699402f212">CN-BGP协议</a></p><div class="content"><p>[[CN-NotesView]]</p>
<h2 id="Internet-AS间路由协议：BGP"><a href="#Internet-AS间路由协议：BGP" class="headerlink" title="Internet AS间路由协议：BGP"></a>Internet AS间路由协议：BGP</h2><p><strong>边界网关协议BGP</strong>：事实上的标准域间路由协议</p>
<ul>
<li>将Internet “粘合”为一个整体的关键</li>
</ul>
<p>BGP为每个AS提供了一种手段：</p>
<ol>
<li><p>eBGP：从邻居的自治系统获取子网的可达性信息</p>
</li>
<li><p>iBGP：向所有AS内部有尤其传播子网可达性信息</p>
</li>
<li><p>基于可达性信息和策略，确定到达其他网络的“好”路径</p>
</li>
</ol>
<p>容许子网向Internet其余部分通告它的存在</p>
<h2 id="BGP协议的基础"><a href="#BGP协议的基础" class="headerlink" title="BGP协议的基础"></a>BGP协议的基础</h2><p>BGP会话(session)：两个BGP路由器（”Peers”）交换BGP报文：</p>
<ul>
<li><p>通告去往不同目的的前缀(prefix)的路径（“路径向量”）协议</p>
</li>
<li><p>报文交换基于半永久的TCP协议</p>
</li>
</ul>
<p>BGP报文：</p>
<p>OPEN：和peers建立TCP连接，并认证发送方</p>
<p>UPDATE：通告新路径（或者撤销原路径）</p>
<p>KEEPALIVE：在没有UPDATE的时候，保活连接；也用于对OPEN请求的确认</p>
<p>NOTIFICATION：报告先前报文的差错；也被用于关闭连接</p>
<p><img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/20231029231514.png" alt="image.png"></p>
<p>当AS3通告一个前缀给AS1时：</p>
<ul>
<li><p>AS3 承诺可以将数据报转发给该子网</p>
</li>
<li><p>AS3在通告中会聚合网络前缀</p>
</li>
</ul>
<h2 id="BGP基础：分发路径信息"><a href="#BGP基础：分发路径信息" class="headerlink" title="BGP基础：分发路径信息"></a>BGP基础：分发路径信息</h2><p>在3a和1c之间AS3利用eBGP会话向AS1发送前缀可达信息。</p>
<p>1c则可以利用iBGP向AS1内的所有路由器分发新的前缀可达性信息</p>
<p>1b可以(maybe not) 进一步通过1b-到-2a的eBGP会话，向AS2通告新的可达性信息</p>
<p>当路由器获得新的前缀可达性的时候，就会在转发表中增加关于该前缀的入口(路由项)</p>
<p><img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/20231029231942.png" alt="image.png"></p>
<h2 id="路径属性和BGP路由-route"><a href="#路径属性和BGP路由-route" class="headerlink" title="路径属性和BGP路由(route)"></a>路径属性和BGP路由(route)</h2><p>通告的前缀信息包括BGP属性</p>
<ul>
<li>前缀 + 属性 &#x3D; “路由”</li>
</ul>
<p>两个重要属性：</p>
<ul>
<li>AS-PATH : 包含前缀通告所经过的AS序列：e.g. AS 67,AS 17</li>
<li>NEXT-HOP(下一跳)：开始一个AS-PATH的路由器接口，指向吓一跳的AS</li>
</ul>
<h2 id="BGP的路由选择"><a href="#BGP的路由选择" class="headerlink" title="BGP的路由选择"></a>BGP的路由选择</h2><p>网关路由器收到路由通告之后，利用其输入策略决策接收或者拒绝该路由</p>
<p>从不将流量路由到ASx<br>基于策略的路由</p>
<p>路由器可能或者到某目的AS的多条路由，基于以下准则：</p>
<ul>
<li><p>本地偏好值属性：策略决策</p>
</li>
<li><p>最短的AS-PATH</p>
</li>
<li><p>最近的下一跳路由器</p>
</li>
</ul>
<h2 id="BGP路由选择策略"><a href="#BGP路由选择策略" class="headerlink" title="BGP路由选择策略"></a>BGP路由选择策略</h2><p>提供商网络<br>客户网络<br>桩网络<br>双宿网络</p>
<p><img src="https://typora-slater.oss-cn-beijing.aliyuncs.com/picture/6034294e3b9c0feeabde6fc50c50ec2.jpg" alt="6034294e3b9c0feeabde6fc50c50ec2.jpg"></p>
<h3 id="为什么采用不同的AS内和AS间的路由协议"><a href="#为什么采用不同的AS内和AS间的路由协议" class="headerlink" title="为什么采用不同的AS内和AS间的路由协议"></a>为什么采用不同的AS内和AS间的路由协议</h3><h4 id="策略-policy"><a href="#策略-policy" class="headerlink" title="策略(policy):"></a>策略(policy):</h4><p>inter-AS:期望能够管理控制流量如何被路由，谁路由经过其网络等<br>intra-AS: 单一管理，无需策略决策</p>
<h4 id="规模-scale"><a href="#规模-scale" class="headerlink" title="规模(scale)"></a>规模(scale)</h4><p>层次路由节省路由表大小，减少路由更新流量<br>适应大规模互联网</p>
<h4 id="性能-performance"><a href="#性能-performance" class="headerlink" title="性能(performance):"></a>性能(performance):</h4><p>intra-AS:侧重性能<br>inter-AS: 策略主导</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-24T02:14:50.040Z" title="2023/11/24 10:14:50">2023-11-24</time>发表</span><span class="level-item"><time dateTime="2023-11-01T13:03:52.950Z" title="2023/11/1 21:03:52">2023-11-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><span class="level-item">5 分钟读完 (大约782个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-ARP%E5%8D%8F%E8%AE%AE/">CN-ARP协议</a></p><div class="content"><p>[[CN-NotesView]]</p>
<h2 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h2><p>32位的IP地址：</p>
<ul>
<li>接口的网络层地址</li>
<li>用于标识网络层(第三层)分组，支持分组转发</li>
</ul>
<p>MAC地址（或称LAN地址，物理地址，以太网地址）</p>
<p>作用：用于局域网内的标识一个帧从哪个接口发出没到达哪个物理相连的其他接口</p>
<p>48位MAC地址（用于大部分LANs）固化在网卡的ROM中，有时也可以用软件设置</p>
<p>局域网的每块网卡都有唯一的MAC地址</p>
<p>MAC地址由IEEE统一管理和分配</p>
<p>网卡生产商够吗MAC地址空间（前24bit）</p>
<p>类比：</p>
<ul>
<li>MAC地址：身份证号</li>
<li>IP地址：邮政地址</li>
</ul>
<p><strong>MAC地址是“平面”地址: 可“携带</strong></p>
<p>可以从一个LAN移到另一个LAN</p>
<p><strong>IP地址是层次地址: 不可“携带“</strong></p>
<p>IP地址依赖于结点连接到哪个子网</p>
<h2 id="ARP：地址解析协议"><a href="#ARP：地址解析协议" class="headerlink" title="ARP：地址解析协议"></a>ARP：地址解析协议</h2><p>问题：（在同一个LAN内）如何在一致目的接口的IP地址前提下确定其MAC地址？</p>
<p>ARP表：LAN中的每个IP结点(主机&#x2F;路由器)维护一个表</p>
<ul>
<li><p>存储某些LAN结点的IP、MAC关系地址映射关系：&lt;IP;MAC;TTL&gt;</p>
</li>
<li><p>TTL(Time To Live): 经过这个时间之后这个映射关系会被遗弃</p>
</li>
</ul>
<p>A想要给同一个局域网内的B发送数据报</p>
<p>B的MAC地址不再A的ARP表中。</p>
<p>A广播ARP查询分组，其中包含B的IP分组</p>
<p>目的MAC地址 &#x3D; FF-FF-FF-FF-FF-FF</p>
<p>LAN中的所有结点都会接收ARP查询</p>
<p>B接收ARP查询分组，IP地址匹配成功，向A应答B的MAC地址</p>
<ul>
<li>利用单播帧向A发送应答</li>
</ul>
<p>A在其ARP表中，缓存B的IP-MAC地址对，直至超时</p>
<ul>
<li>超时之后，再次刷新</li>
</ul>
<p>ARP是”即插即用“协议：</p>
<ul>
<li>结点自主创建ARP表，无需干预</li>
</ul>
<h2 id="寻址：从一个LAN路由到另一个LAN"><a href="#寻址：从一个LAN路由到另一个LAN" class="headerlink" title="寻址：从一个LAN路由到另一个LAN"></a>寻址：从一个LAN路由到另一个LAN</h2><p>通信过程：A通过路由器R向B发送数据报</p>
<ul>
<li>关注寻址：IP地址（数据报中）和MAC地址（帧中）</li>
<li>假设A直到B的IP地址（怎么知道的?）</li>
<li>假设A知道第一跳路由器R（左）接口IP地址</li>
<li>假设A知道第一条路由器R（左）接口的MAC地址</li>
</ul>
<p>A构造IP数据报，其中源IP地址是A的IP地址，目的IP地址是B的IP地址</p>
<p>A构造链路层帧，其中源MAC地址是A的MAC地址，目的MAC地址做接口的MAC地址，封装A到B的数据报</p>
<p>帧从A发送到R</p>
<p>R接收帧，提取IP数据报，传递给上层的IP协议</p>
<p>R转发IP数据报</p>
<p>R构造链路层帧，其中源MAC地址是R接口的MAC地址，目的MAC地址是B的MAC地址，封装A到B的IP数据报</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/page/7/">上一页</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/page/9/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/page/7/">7</a></li><li><a class="pagination-link is-current" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/page/8/">8</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">76</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">11</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">76</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T02:14:50.099Z">2023-11-24</time></p><p class="title"><a href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AEMAC%E5%8D%8F%E8%AE%AE/">CN-随机访问MAC协议</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T02:14:50.098Z">2023-11-24</time></p><p class="title"><a href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-%E8%BD%AE%E8%BD%AC%E8%AE%BF%E9%97%AEMAC%E5%8D%8F%E8%AE%AE/">CN-轮转访问MAC协议</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T02:14:50.098Z">2023-11-24</time></p><p class="title"><a target="_blank" rel="noopener" href="https://www.notion.so/CN-363d4a3068db49bf8d4a15db21678a30">CN-链路状态路由算法</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T02:14:50.097Z">2023-11-24</time></p><p class="title"><a href="/2023/11/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CN-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">CN-路由器的工作原理</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-24T02:14:50.096Z">2023-11-24</time></p><p class="title"><a target="_blank" rel="noopener" href="https://www.notion.so/CN-0b57c4a55e1047aab693b65e9c22fefe">CN-路由和转发</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">76</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Cookie/"><span class="tag">Cookie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTP/"><span class="tag">HTTP</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web%E5%BA%94%E7%94%A8/"><span class="tag">Web应用</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BC%A0%E8%BE%93%E5%B1%82/"><span class="tag">传输层</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%9C%E4%B8%9A/"><span class="tag">作业</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/"><span class="tag">数据链路层</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A8%A1%E6%9D%BF/"><span class="tag">模板</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%9F%A5%E8%AF%86%E5%8D%A1%E7%89%87/"><span class="tag">知识卡片</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/"><span class="tag">网络层</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="tag">计算机网络</span><span class="tag">76</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"><span class="tag">计算机网络概述</span><span class="tag">8</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SlaterXu" height="28"></a><p class="is-size-7"><span>&copy; 2023 Molaters Lee</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>